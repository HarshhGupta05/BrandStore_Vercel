module.exports=[33983,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(88405),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(87682),j=a.i(88237),k=a.i(54161),l=a.i(65733),m=a.i(70106);let n=(0,m.default)("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);var o=a.i(15618),p=a.i(81560);let q=(0,m.default)("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);var r=a.i(77156);function s(){let{products:a,manufacturerOrders:m,createManufacturerOrder:s,receiveManufacturerOrderItems:t,deleteManufacturerOrder:u}=(0,d.useStore)(),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)({}),[D,E]=(0,c.useState)({}),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(new Date().toISOString().split("T")[0]),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)([{productId:"",quantity:"",cost:""}]),N=(a,b,c)=>{let d=[...L];d[a]={...d[a],[b]:c},M(d)},O=async b=>{b.preventDefault();let c=L.filter(a=>a.productId&&Number(a.quantity)>0&&Number(a.cost)>=0);if(0===c.length)return void alert("Please add at least one valid product.");let d=c.map(b=>{let c=a.find(a=>a.id===b.productId);return{productId:b.productId,productName:c?.name||"Unknown Product",quantity:Number(b.quantity),quantityReceived:0,cost:Number(b.cost)}});await s({items:d,orderDate:H,expectedArrival:J,status:"Ordered"}),I(new Date().toISOString().split("T")[0]),K(""),M([{productId:"",quantity:"",cost:""}]),w(!1)},P=(a,b)=>{C(c=>({...c,[a]:b}))},Q=(a,b)=>{E(c=>({...c,[a]:b}))},R=async()=>{if(!z)return;let a=Object.entries(B).map(([a,b])=>({productId:a,receivedQuantity:Number(b)})).filter(a=>a.receivedQuantity>0);0===a.length?y(!1):(await t(z.orderId,a.map(a=>({...a,receivedDate:D[a.productId]||new Date().toISOString().split("T")[0]}))),y(!1),A(null))};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"mb-2 text-3xl font-bold",children:"Manufacturer Orders"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage purchase orders and inventory restocking"})]}),(0,b.jsxs)(l.Dialog,{open:v,onOpenChange:w,children:[(0,b.jsx)(l.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{children:[(0,b.jsx)(o.Plus,{className:"mr-2 h-4 w-4"}),"Create Order"]})}),(0,b.jsxs)(l.DialogContent,{className:"max-w-3xl",children:[(0,b.jsx)(l.DialogHeader,{children:(0,b.jsx)(l.DialogTitle,{children:"Create New Purchase Order"})}),(0,b.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"orderDate",children:"Order Date"}),(0,b.jsx)(g.Input,{id:"orderDate",type:"date",required:!0,value:H,onChange:a=>I(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"expectedArrival",children:"Expected Arrival"}),(0,b.jsx)(g.Input,{id:"expectedArrival",type:"date",required:!0,value:J,onChange:a=>K(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{children:"Order Items"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{M([...L,{productId:"",quantity:"",cost:""}])},children:[(0,b.jsx)(o.Plus,{className:"h-4 w-4 mr-1"})," Add Item"]})]}),(0,b.jsxs)("div",{className:"border rounded-md overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 bg-muted p-2 text-xs font-medium text-muted-foreground border-b uppercase",children:[(0,b.jsx)("div",{className:"col-span-5",children:"Product"}),(0,b.jsx)("div",{className:"col-span-2",children:"Qty"}),(0,b.jsx)("div",{className:"col-span-3",children:"Cost/Unit"}),(0,b.jsx)("div",{className:"col-span-2",children:"Action"})]}),(0,b.jsx)("div",{className:"max-h-[300px] overflow-y-auto p-2 space-y-2",children:L.map((c,d)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,b.jsx)("div",{className:"col-span-5",children:(0,b.jsxs)(i.Select,{value:c.productId,onValueChange:a=>N(d,"productId",a),children:[(0,b.jsx)(i.SelectTrigger,{className:"h-8",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select Product"})}),(0,b.jsx)(i.SelectContent,{children:a.map(a=>(0,b.jsx)(i.SelectItem,{value:a.id,children:a.name},a.id))})]})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)(g.Input,{type:"number",min:"1",placeholder:"Qty",className:"h-8",value:c.quantity,onChange:a=>N(d,"quantity",a.target.value)})}),(0,b.jsx)("div",{className:"col-span-3",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-2 top-1.5 text-xs text-muted-foreground",children:"₹"}),(0,b.jsx)(g.Input,{type:"number",min:"0",step:"0.01",placeholder:"0.00",className:"h-8 pl-5",value:c.cost,onChange:a=>N(d,"cost",a.target.value)})]})}),(0,b.jsx)("div",{className:"col-span-2 flex justify-end",children:(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:bg-destructive/10",onClick:()=>{let a;(a=[...L]).splice(d,1),M(a)},disabled:1===L.length,children:(0,b.jsx)(p.Trash2,{className:"h-4 w-4"})})})]},d))})]})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",children:"Create Order"})]})]})]})]})]}),0===m.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-12 text-center",children:[(0,b.jsx)(n,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),(0,b.jsx)("h2",{className:"mb-2 text-xl font-semibold",children:"No orders found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Get started by creating a new manufacturer order."})]})}):(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n,{className:"h-5 w-5"}),"All Orders (",m.length,")"]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"rounded-md border",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Order ID"}),(0,b.jsx)(j.TableHead,{children:"Order Date"}),(0,b.jsx)(j.TableHead,{className:"text-center",children:"Items"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Total Cost"}),(0,b.jsx)(j.TableHead,{children:"Expected"}),(0,b.jsx)(j.TableHead,{children:"Status"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(j.TableBody,{children:m.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{className:"font-medium",children:a.orderId}),(0,b.jsx)(j.TableCell,{children:new Date(a.orderDate).toLocaleDateString()}),(0,b.jsx)(j.TableCell,{className:"text-center",children:(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-secondary text-xs",children:[a.items.length," Products"]})}),(0,b.jsxs)(j.TableCell,{className:"text-right",children:["₹",a.totalCost.toFixed(2)]}),(0,b.jsx)(j.TableCell,{children:new Date(a.expectedArrival).toLocaleDateString()}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(k.Badge,{variant:"outline",className:(a=>{switch(a){case"Received":return"bg-green-100 text-green-800 border-green-200";case"Partially Received":return"bg-blue-100 text-blue-800 border-blue-200";case"Ordered":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Cancelled":return"bg-red-100 text-red-800 border-red-200";default:return""}})(a.status),children:a.status})}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsx)("div",{className:"flex justify-end gap-2",children:(0,b.jsxs)(f.Button,{variant:"default",size:"sm",className:"bg-primary/10 text-primary hover:bg-primary/20 hover:text-primary",onClick:()=>{let b;return A(a),C({}),b={},void(a.items.forEach(a=>{b[a.productId]=new Date().toISOString().split("T")[0]}),E(b),G(null),y(!0))},children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-1"})," Manage"]})})})]},a.orderId))})]})})})]}),(0,b.jsx)(l.Dialog,{open:x,onOpenChange:y,children:(0,b.jsxs)(l.DialogContent,{className:"max-w-6xl bg-background p-0 overflow-hidden flex flex-col max-h-[85vh] w-[95vw]",children:[(0,b.jsx)(l.DialogHeader,{className:"px-6 py-4 border-b flex-shrink-0",children:(0,b.jsxs)(l.DialogTitle,{className:"text-xl",children:["Manage Order: ",(0,b.jsx)("span",{className:"font-mono text-muted-foreground ml-2",children:z?.orderId})]})}),z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-muted/30 p-4 rounded-xl border",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-1",children:"Order Date"}),(0,b.jsx)("div",{className:"font-mono text-lg font-medium",children:z.orderDate?new Date(z.orderDate).toLocaleDateString():"-"})]}),(0,b.jsxs)("div",{className:"bg-muted/30 p-4 rounded-xl border",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-1",children:"Total Cost"}),(0,b.jsxs)("div",{className:"font-mono text-lg font-medium",children:["₹",z.totalCost.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-muted/30 p-4 rounded-xl border flex flex-col justify-center items-start col-span-2 md:col-span-2",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-1",children:"Status"}),(0,b.jsx)(k.Badge,{variant:"outline",className:`
                        px-3 py-1 text-sm font-medium border-0
                        ${"Received"===z.status?"bg-green-100 text-green-700 hover:bg-green-100":""}
                        ${"Partially Received"===z.status?"bg-amber-100 text-amber-700 hover:bg-amber-100":""}
                        ${"Ordered"===z.status?"bg-slate-100 text-slate-700 hover:bg-slate-100":""}
                        ${"Cancelled"===z.status?"bg-red-100 text-red-700 hover:bg-red-100":""}
                    `,children:z.status})]})]}),(0,b.jsxs)("div",{className:"hidden md:block",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:["Received Items",(0,b.jsxs)(k.Badge,{variant:"secondary",className:"text-xs font-normal",children:[z.items.length," Items"]})]}),(0,b.jsx)("div",{className:"border rounded-lg bg-background overflow-hidden shadow-sm overflow-x-auto",children:(0,b.jsxs)(j.Table,{className:"table-fixed min-w-[700px]",children:[(0,b.jsx)(j.TableHeader,{className:"bg-muted/50",children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{className:"w-[35%] pl-4",children:"Product Details"}),(0,b.jsx)(j.TableHead,{className:"text-right w-[15%]",children:"Ordered"}),(0,b.jsx)(j.TableHead,{className:"text-right w-[15%]",children:"Received"}),(0,b.jsx)(j.TableHead,{className:"text-right w-[15%]",children:"Remaining"}),(0,b.jsx)(j.TableHead,{className:"w-[20%] text-center",children:"Receive Actions"})]})}),(0,b.jsx)(j.TableBody,{children:z.items.map(a=>{let d=a.quantity-a.quantityReceived,e=d<=0;return(0,b.jsxs)(c.Fragment,{children:[(0,b.jsxs)(j.TableRow,{className:`group transition-colors ${e?"bg-muted/40 hover:bg-muted/50":"hover:bg-muted/5"}`,children:[(0,b.jsx)(j.TableCell,{className:"font-medium align-top py-4 pl-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-foreground truncate max-w-[250px]",title:a.productName,children:a.productName}),a.deliveries&&a.deliveries.length>0&&(0,b.jsxs)("button",{onClick:()=>G(F===a.productId?null:a.productId),className:"text-xs text-blue-600 hover:text-blue-700 hover:underline flex items-center gap-1 w-fit transition-colors",children:[(0,b.jsx)(r.Eye,{className:"h-3 w-3"}),F===a.productId?"Hide History":"View History"]}),e&&(0,b.jsx)(k.Badge,{variant:"secondary",className:"w-fit bg-green-100 text-green-700 border-green-200 mt-1 text-[10px] px-2 py-0.5",children:"Completed"})]})}),(0,b.jsx)(j.TableCell,{className:"text-right align-top py-4 font-mono text-muted-foreground",children:a.quantity}),(0,b.jsx)(j.TableCell,{className:"text-right align-top py-4 font-mono text-green-600",children:a.quantityReceived}),(0,b.jsx)(j.TableCell,{className:"text-right align-top py-4",children:(0,b.jsx)("span",{className:`font-mono font-bold ${d>0?"text-foreground":"text-muted-foreground"}`,children:d})}),(0,b.jsx)(j.TableCell,{className:"align-top py-4",children:!e&&"Cancelled"!==z.status&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Input,{type:"number",min:"0",max:d,placeholder:"Qty",className:"h-9 w-full text-right bg-background border-input focus:ring-1 pr-8",value:B[a.productId]||"",onChange:b=>P(a.productId,b.target.value)}),(0,b.jsxs)("span",{className:"absolute right-3 top-2.5 text-xs text-muted-foreground pointer-events-none",children:["/ ",d]})]}),(0,b.jsx)(g.Input,{type:"date",className:"h-9 w-full bg-background border-input text-xs",value:D[a.productId]||"",onChange:b=>Q(a.productId,b.target.value)})]})})]}),F===a.productId&&a.deliveries&&(0,b.jsx)(j.TableRow,{className:"bg-muted/10",children:(0,b.jsx)(j.TableCell,{colSpan:5,className:"p-0",children:(0,b.jsxs)("div",{className:"p-4 bg-muted/20 border-y shadow-inner",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3 pl-1",children:"Delivery History"}),(0,b.jsx)("div",{className:"space-y-2",children:a.deliveries.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center text-sm bg-background border rounded-md px-3 py-2",children:[(0,b.jsxs)("span",{className:"font-mono font-medium w-8 text-right mr-3",children:[c+1,"."]}),(0,b.jsxs)("span",{className:"font-medium mr-auto",children:["Received ",(0,b.jsx)("span",{className:"text-green-600",children:a.receivedQuantity})," units"]}),(0,b.jsx)("span",{className:"text-muted-foreground font-mono text-xs",children:new Date(a.receivedDate).toLocaleDateString()}),(0,b.jsx)("span",{className:"ml-4 text-xs bg-muted px-2 py-0.5 rounded text-muted-foreground",children:"Admin"})]},c))})]})})})]},a.productId)})})]})})]}),(0,b.jsxs)("div",{className:"md:hidden space-y-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["Received Items",(0,b.jsxs)(k.Badge,{variant:"secondary",className:"text-xs font-normal",children:[z.items.length," Items"]})]}),z.items.map(a=>{let c=a.quantity-a.quantityReceived,d=c<=0;return(0,b.jsxs)("div",{className:`border rounded-lg p-4 space-y-4 ${d?"bg-muted/40":"bg-background"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:a.productName}),d&&(0,b.jsx)(k.Badge,{variant:"secondary",className:"text-[10px] mt-1",children:"Completed"})]}),(0,b.jsxs)("div",{className:"text-right text-xs space-y-1",children:[(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Ordered: ",a.quantity]}),(0,b.jsxs)("div",{className:"text-green-600",children:["Received: ",a.quantityReceived]}),(0,b.jsxs)("div",{className:"font-bold",children:["Remaining: ",c]})]})]}),!d&&"Cancelled"!==z.status&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(h.Label,{className:"text-xs text-muted-foreground",children:"Receive Qty"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Input,{type:"number",min:"0",max:c,className:"h-9 w-full bg-background",value:B[a.productId]||"",onChange:b=>P(a.productId,b.target.value)}),(0,b.jsxs)("span",{className:"absolute right-2 top-2.5 text-xs text-muted-foreground",children:["/",c]})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(h.Label,{className:"text-xs text-muted-foreground",children:"Date"}),(0,b.jsx)(g.Input,{type:"date",className:"h-9 w-full bg-background",value:D[a.productId]||"",onChange:b=>Q(a.productId,b.target.value)})]})]}),(0,b.jsxs)("div",{className:"pt-2",children:[(0,b.jsxs)("button",{onClick:()=>G(F===a.productId?null:a.productId),className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[(0,b.jsx)(r.Eye,{className:"h-3 w-3"})," ",F===a.productId?"Hide History":"View History"]}),F===a.productId&&a.deliveries&&(0,b.jsx)("div",{className:"mt-2 space-y-2 bg-muted/20 p-2 rounded",children:a.deliveries.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between text-xs border-b border-border/50 pb-1 last:border-0",children:[(0,b.jsx)("span",{children:new Date(a.receivedDate).toLocaleDateString()}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:a.receivedQuantity})," units"]})]},c))})]})]},a.productId)})]})]}),(0,b.jsxs)("div",{className:"p-6 border-t bg-background flex justify-end gap-3 flex-shrink-0",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:R,disabled:0===Object.keys(B).length,children:"Update Received Items"})]})]})]})})]})}a.s(["default",()=>s],33983)}];

//# sourceMappingURL=app_admin_manufacturer_page_tsx_cb77ca59._.js.map